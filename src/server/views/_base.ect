<!doctype html>
<html lang="<%= @_locale %>">
  <head>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <title><%= @__('WEBSITE_TITLE') %></title>

    <% include 'partials/meta' %>
    <% include 'partials/favicon' %>

    <!-- stylesheet imports -->
    <link rel='stylesheet' href='//fonts.googleapis.com/css?family=Raleway'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">				

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    <% content 'head_end' %>

    <% if @_locale == 'ja': %>
    <style>
      body {
        font-family: "ヒラギノ角ゴ Pro W3", "Hiragino Kaku Gothic Pro",Osaka, "メイリオ", Meiryo, "ＭＳ Ｐゴシック", "MS PGothic", sans-serif;
      }
    </style>
    <% end %>

    <% include 'partials/ga' %>
  </head>
  <% content %>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

  <script src="<%= @__asset('layout.js') %>"></script>

  <script>
    ;(function() {
      var menu = document.getElementById('fullscreen-menu')

      if (!menu) return;

      var prevent = function(event) {
        if (event.target === menu) {
          event.preventDefault()
        }
      }

      menu.addEventListener('click', prevent)      
    })();

    $(document).ready(function () {

      $('#open-nav').click(function () {
        $('#content-nav').addClass('is-active');
        $('html').addClass('disable-scroll');
      });

      $(document).on('touchstart',function(event){
        if (event.target == $('#content-nav')[0]) {
          $('#content-nav').removeClass('is-active');
          $('html').removeClass('disable-scroll');
        }
      });

      $('.js-home').parent('.site-content').siblings('.header').addClass('alter-navbar');
      $('.alter-navbar').addClass('bg-transparent');
      $('.alter-navbar').find('.js-logo').attr('src', '<%= @__asset('img/logo-white.png') %>');

      if ( $('.header').hasClass('alter-navbar') ) {
        $(document).on('scroll', function () {
          var navbarPosition = $('.alter-navbar').offset().top;
          var bannerContentPosition = $('.js-banner-content').offset().top;

          if (navbarPosition > (bannerContentPosition - 130)) {
            $('.alter-navbar').find('.js-logo').attr('src', '<%= @__asset('img/logo.png') %>');
            $('.alter-navbar').removeClass('bg-transparent');
          } else {
            $('.alter-navbar').find('.js-logo').attr('src', '<%= @__asset('img/logo-white.png') %>');
            $('.alter-navbar').addClass('bg-transparent');
          }
        });
      }

    });
  </script>
</html>
